<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>My Editor</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    .input-field {
      margin-bottom: 10px;
    }

    .input-field label {
      display: block;
      font-weight: bold;
    }

    .input-field input[type="text"] {
      width: 100%;
      padding: 5px;
      border-radius: 4px;
      border: 1px solid #ccc;
      resize: vertical;
    }
    
    .input-field textarea {
      width: 100%;
      padding: 5px;
      border-radius: 4px;
      border: 1px solid #ccc;
      resize: vertical;
      height: 300px;
    }

    .submit-btn {
      margin-top: 10px;
    }

    .format-btns {
      margin-bottom: 10px;
    }
    
    .format-btns button {
      margin-right: 5px;
      padding: 5px;
      background-color: #f5f5f5;
      border: none;
      cursor: pointer;
    }
    
    .format-btns button:hover {
      background-color: #e0e0e0;
    }
    
    .format-btns button img {
      width: 16px;
      height: 16px;
      vertical-align: middle;
    }
    
    .content-field {
      width: 100%;
      padding: 5px;
      border-radius: 4px;
      border: 1px solid #ccc;
      resize: vertical;
      height: 300px;
    }
    
    .tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }
    
    .tab {
      padding: 10px 20px;
      background-color: #f5f5f5;
      cursor: pointer;
    }
    
    .tab.active {
      background-color: #e0e0e0;
    }
    
    .card {
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 10px;
      margin-bottom: 10px;
    }
    
    .card-title {
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .card-date {
      font-size: 12px;
      color: #666;
    }
    
    .card-buttons {
      display: flex;
      justify-content: flex-end;
      margin-top: 5px;
    }
    
    .card-buttons button {
      margin-left: 5px;
      padding: 3px 8px;
      background-color: #f5f5f5;
      border: none;
      cursor: pointer;
    }
    
    .card-buttons button:hover {
      background-color: #e0e0e0;
    }
    
    #blog-manager {
      display: none;
    }
  </style>
</head>
<body>
  <h1>My Editor</h1>
  
  <div class="tabs">
    <div class="tab" onclick="switchTab('blog-editor')">Blog Editor</div>
    <div class="tab" onclick="switchTab('blog-manager')">Blog Manager</div>
  </div>
  
  <div id="blog-editor">
    <form>
      <div class="input-field">
        <label for="title-input">Title:</label>
        <input type="text" id="title-input">
      </div>
      <div class="input-field">
        <label for="content-input">Content:</label>
        <div class="format-btns">
          <button type="button" onclick="addBold()"><b>B</b></button>
          <button type="button" onclick="addItalic()"><i>I</i></button>
          <button type="button" onclick="addUnderline()"><u>U</u></button>
        </div>
        <div id="content-input" class="content-field" contenteditable="true"></div>
      </div>
      <div class="input-field">
        <label for="image-input">Image URL:</label>
        <input type="text" id="image-input">
      </div>
      <div class="submit-btn">
        <button type="button" onclick="saveData()">Save</button>
        <button type="button" onclick="clearForm()">Clear</button>
      </div>
    </form>
  </div>
  <div id="blog-manager">
    <div id="cards-container"></div>
  </div>
  <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-database.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBwZYFB2Hv2iuiNBHdKMXX0boVhJFPEunk",
	  authDomain: "editor-test-4c47e.firebaseapp.com",
	  databaseURL: "https://editor-test-4c47e-default-rtdb.firebaseio.com",
	  projectId: "editor-test-4c47e",
	  storageBucket: "editor-test-4c47e.appspot.com",
	  messagingSenderId: "465959812936",
	  appId: "1:465959812936:web:4216ba3ad0af767882bd7d"
    };
    
    firebase.initializeApp(firebaseConfig);
    
    const database = firebase.database();
    
    function switchTab(tabId) {
      const editorTab = document.getElementById('blog-editor');
      const managerTab = document.getElementById('blog-manager');
      const editorTabButton = document.querySelector('.tab:nth-child(1)');
      const managerTabButton = document.querySelector('.tab:nth-child(2)');
      
      if (tabId === 'blog-editor') {
        editorTab.style.display = 'block';
        managerTab.style.display = 'none';
        editorTabButton.classList.add('active');
        managerTabButton.classList.remove('active');
      } else if (tabId === 'blog-manager') {
        editorTab.style.display = 'none';
        managerTab.style.display = 'block';
        editorTabButton.classList.remove('active');
        managerTabButton.classList.add('active');
        loadEntries();
      }
    }
    
    function loadEntries() {
      const cardsContainer = document.getElementById('cards-container');
      cardsContainer.innerHTML = '';
      
      database.ref('data').once('value', function(snapshot) {
        snapshot.forEach(function(childSnapshot) {
          const key = childSnapshot.key;
          const childData = childSnapshot.val();
          const card = createCard(key, childData);
          cardsContainer.appendChild(card);
        });
      });
    }
    
    function createCard(key, data) {
      const card = document.createElement('div');
      card.classList.add('card');
      
      const title = document.createElement('div');
      title.classList.add('card-title');
      title.innerText = data.title;
      
      const date = document.createElement('div');
      date.classList.add('card-date');
      date.innerText = formatDate(new Date());
      
      const buttons = document.createElement('div');
      buttons.classList.add('card-buttons');
      
      const editButton = document.createElement('button');
		editButton.innerText = 'Edit';
		editButton.addEventListener('click', function() {
		switchTab('blog-editor');
		populateForm(key, data);
	});

  const deleteButton = document.createElement('button');
  deleteButton.innerText = 'Delete';
  deleteButton.addEventListener('click', function() {
    deleteEntry(key);
  });
  
  buttons.appendChild(editButton);
  buttons.appendChild(deleteButton);
  
  card.appendChild(title);
  card.appendChild(date);
  card.appendChild(buttons);
  
  return card;
}

function formatDate(date) {
  const options = { year: 'numeric', month: 'long', day: 'numeric' };
  return date.toLocaleDateString('en-US', options);
}

function populateForm(key, data) {
  document.getElementById('title-input').value = data.title;
  document.getElementById('content-input').innerHTML = data.content;
  document.getElementById('image-input').value = data.image;
  
  const saveButton = document.querySelector('#blog-editor button[type="button"]');
  saveButton.onclick = function() {
    updateEntry(key);
  };
}

function updateEntry(key) {
  const title = document.getElementById('title-input').value;
  const content = document.getElementById('content-input').innerHTML;
  const image = document.getElementById('image-input').value;
  
  if (!title || !content || !image) {
    alert('Please fill in all fields!');
    return;
  }
  
  const confirmSave = confirm('Are you sure you want to update this entry?');
  
  if (confirmSave) {
    const updatedData = {
      title: title,
      content: content,
      image: image
    };
    
    database.ref('data/' + key).update(updatedData);
    
    clearForm();
    switchTab('blog-manager');
    
    alert('Entry updated successfully!');
  }
}

function deleteEntry(key) {
  const confirmDelete = confirm('Are you sure you want to delete this entry?');
  
  if (confirmDelete) {
    database.ref('data/' + key).remove().then(function() {
      switchTab('blog-manager');
      loadEntries();
      alert('Entry deleted successfully!');
    }).catch(function(error) {
      console.error('Error deleting entry:', error);
    });
  }
}

function saveData() {
  const title = document.getElementById('title-input').value;
  const content = document.getElementById('content-input').innerHTML;
  const image = document.getElementById('image-input').value;
  
  if (!title || !content || !image) {
    alert('Please fill in all fields!');
    return;
  }
  
  const confirmSave = confirm('Are you sure you want to save this data?');
  
  if (confirmSave) {
    const newData = {
      title: title,
      content: content,
      image: image
    };
    
    database.ref('data').push(newData);
    
    clearForm();
    
    alert('Data saved successfully!');
  }
}

function clearForm() {
  document.getElementById('title-input').value = '';
  document.getElementById('content-input').innerHTML = '';
  document.getElementById('image-input').value = '';
}

function addBold() {
  document.execCommand('bold', false, null);
  updateContentDisplay();
}

function addItalic() {
  document.execCommand('italic', false, null);
  updateContentDisplay();
}

function addUnderline() {
  document.execCommand('underline', false, null);
  updateContentDisplay();
}

function updateContentDisplay() {
  const contentInput = document.getElementById('content-input');
  const contentDisplay = document.getElementById('content-display');
contentDisplay.innerHTML = contentInput.innerHTML;
}

switchTab('blog-editor');
  </script>
</body>
</html>